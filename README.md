# 13.2 Домашняя работа по WebApp

## Описание
Нужно было подключить spring securiy и реализовать защиту endpoint'ов.

## Сущность:
Появилась новая сущность, User и класс Role.
### `User`
- **id** - `Long` ID пользователя.
- **username** - `String` Имя пользователя. 
- **password** - `String` Пароль пользователя.
- **email** - `String` Почта, нужна для симуляции 2FA.
- **role** - `Role` Роль пользователя USER || ADMIN.

## DTO
- **SignUpRequest** - ДТО для запроса на регистрацию. Есть 3 поля: username, email, password.
- **SignInRequest** - ДТО для запроса на аутентификацию. Есть 2 поля: username, password.
- **JwtAuthenticationResponse** - ДТО для выдачи JWT токена. 
- **PasswordResetRequest** - ДТО для запроса на сброс пароля. Есть 3 поля: username, newPassword, confirmationCode.

## Контроллер AuthController
Путь маппится на /auth и далее по endpoint'ам.
- `/auth/sign-up` - Регистрация пользователя. На вход принимается SignUpRequest. Сохраняет пользователя в бд и генерирует токен на основе данных пользователя. Результатом работы контроллера JWT токен (JwtAuthenticationResponse).
- `/auth/sign-in` - Вход пользователя. Входные данные SignInRequest. Метод проверят, есть ли в бд такой пользователь, если да то генерирует токен, если нет, тоо выдает 403 http код. Результатом работы контроллера JWT токен (JwtAuthenticationResponse).
- `/auth/logout` - Выход из системы. Входные данные это JWT токен, если пользователь авторизован, то токен попадает в LogoutService, где далее помечается как удаленный. После повторного запроса с этим токеном, выйдет 403 http код. Если токен не валидный, то просто напишет что вы вышли из системы.
- `/auth/reset-password` - Сброс пароля. Входные данные PasswordResetRequest. Сначала проверяется токен на валидность, затем проверяется код для 2FA, если все положительно, то пароль меняется. Результатом работы контроллера JWT токен (JwtAuthenticationResponse).

## Контроллер AdminController
Путь маппится на /admin. Тестовый контроллер, нужен для того, чтобы проверить все ли эндпоинты проверяют нужные роли пользователей для доступа.

